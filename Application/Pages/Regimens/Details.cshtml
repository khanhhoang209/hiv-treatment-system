@page
@model Application.Pages.Regimens.DetailsModel

@{
    ViewData["Title"] = "Chi tiết phác đồ điều trị";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}
@section Styles {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        .regimen-details-container {
            max-width: 900px;
            margin: 40px auto 0 auto;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 6px 32px rgba(31, 41, 55, 0.09);
            padding: 0;
            overflow: hidden;
        }

        .regimen-header {
            background: linear-gradient(90deg, #6366f1 0%, #2563eb 100%);
            color: #fff;
            padding: 36px 44px 24px 44px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .regimen-header .title {
            font-size: 2.2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .regimen-header .desc {
            font-size: 1.1rem;
            opacity: 0.92;
            margin-top: 6px;
        }

        .regimen-overview {
            padding: 32px 44px 16px 44px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 36px;
        }

        .regimen-overview .overview-block {
            background: #f3f4f6;
            border-radius: 12px;
            padding: 24px 28px;
            box-shadow: 0 2px 12px rgba(99, 102, 241, 0.04);
        }

        .regimen-overview .overview-label {
            color: #6366f1;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.95rem;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .regimen-overview .overview-value {
            font-size: 1.3rem;
            font-weight: 600;
            color: #1e293b;
        }

        .regimen-overview .overview-badge {
            display: inline-block;
            background: #6366f1;
            color: #fff;
            border-radius: 8px;
            padding: 6px 18px;
            font-size: 1rem;
            font-weight: 500;
            margin-top: 8px;
        }

        .regimen-meds-section {
            padding: 0 44px 32px 44px;
        }

        .regimen-meds-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #10b981;
            margin-bottom: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .regimen-meds-table {
            width: 100%;
            border-radius: 10px;
            overflow: hidden;
            background: #f9fafb;
            box-shadow: 0 2px 12px rgba(16, 185, 129, 0.04);
        }

        .regimen-meds-table th,
        .regimen-meds-table td {
            padding: 14px 18px;
            text-align: left;
        }

        .regimen-meds-table th {
            background: #e0f2fe;
            color: #2563eb;
            font-size: 1rem;
            font-weight: 700;
            border-bottom: 2px solid #dbeafe;
        }

        .regimen-meds-table tr:not(:last-child) td {
            border-bottom: 1px solid #e5e7eb;
        }

        .regimen-meds-table td {
            font-size: 1.05rem;
        }

        .regimen-meds-table .med-name {
            font-weight: 600;
            color: #374151;
        }

        .regimen-meds-table .med-qty {
            text-align: right;
            font-weight: 500;
            color: #6366f1;
        }

        .regimen-actions {
            display: flex;
            justify-content: flex-end;
            gap: 16px;
            padding: 0 44px 32px 44px;
        }

        .regimen-actions .btn {
            min-width: 120px;
            font-weight: 500;
            font-size: 1rem;
        }
    </style>
}

<div class="regimen-details-container">
    <!-- Header -->
    <div class="regimen-header">
        <div>
            <div class="title">
                <i class="bi bi-clipboard2-pulse"></i>
                Chi tiết phác đồ ARV
            </div>
            <div class="desc">Thông tin chi tiết về phác đồ điều trị và các loại thuốc đi kèm</div>
        </div>
    </div>

    <!-- Overview -->
    <div class="regimen-overview">
        <div class="overview-block">
            <div class="overview-label"><i class="bi bi-tag me-1"></i> Tên phác đồ</div>
            <div class="overview-value">@Model.ArvRegimen.Name</div>
            <div class="overview-label mt-4"><i class="bi bi-layers me-1"></i> Cấp độ</div>
            <span class="overview-badge">@Model.ArvRegimen.Level</span>
        </div>
        <div class="overview-block">
            <div class="overview-label"><i class="bi bi-file-earmark-text me-1"></i> Mô tả</div>
            <div class="overview-value" style="font-size:1.08rem; font-weight:400; color:#475569;">
                @Model.ArvRegimen.Description
            </div>
        </div>
    </div>

    <!-- Medicines Table -->
    <div class="regimen-meds-section">
        <div class="regimen-meds-title">
            <i class="bi bi-capsule-pill"></i>
            Danh sách thuốc trong phác đồ
        </div>
        <table class="regimen-meds-table">
            <thead>
                <tr>
                    <th><i class="bi bi-capsule me-1"></i> Thuốc</th>
                    <th style="text-align:right;"><i class="bi bi-123 me-1"></i> Số lượng</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.ComboMedicines != null && Model.ComboMedicines.Any())
                {
                    foreach (var item in Model.ComboMedicines)
                    {
                        <tr>
                            <td class="med-name">@item.Medicine.Name</td>
                            <td class="med-qty">@item.Quantity</td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="2" class="text-center text-muted py-4">
                            <i class="bi bi-info-circle me-1"></i> Không có thuốc nào trong phác đồ này.
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    <!-- Action Buttons -->
    <div class="regimen-actions">
        <a asp-page="./Edit" asp-route-id="@Model.ArvRegimen.Id" class="btn btn-warning shadow-sm">
            <i class="bi bi-pencil-square me-1"></i> Chỉnh sửa
        </a>
        <a asp-page="./Index" class="btn btn-outline-secondary shadow-sm">
            <i class="bi bi-arrow-left me-1"></i> Quay lại danh sách
        </a>
    </div>
</div>